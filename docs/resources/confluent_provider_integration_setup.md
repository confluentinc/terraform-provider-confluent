---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "confluent_provider_integration_v2 Resource - terraform-provider-confluent"
subcategory: ""
description: |-
  
---

# confluent_provider_integration_v2 Resource

[![General Availability](https://img.shields.io/badge/Lifecycle%20Stage-General%20Availability-%2345c6e8)](https://docs.confluent.io/cloud/current/api.html#section/Versioning/API-Lifecycle-Policy)

`confluent_provider_integration_v2` provides a Cloud Service Provider (CSP) integration that allows Confluent Cloud to access resources in your cloud provider account. This is the second generation of provider integrations, supporting both Azure and GCP.

This resource creates the integration in DRAFT status. Use `confluent_provider_integration_v2_authorization` to configure and validate the integration.

-> **Note:** It is recommended to set `lifecycle { prevent_destroy = true }` on production instances to prevent accidental Provider Integration deletion. This setting rejects plans that would destroy or recreate the Provider Integration, such as attempting to change un-editable attributes. Read more about it in the [Terraform docs](https://www.terraform.io/language/meta-arguments/lifecycle#prevent_destroy).

## Example Usage

### Azure Provider Integration

```terraform
resource "confluent_environment" "staging" {
  display_name = "Staging"
  
  stream_governance {
    package = "ESSENTIALS"
  }
}

resource "confluent_provider_integration_v2" "azure" {
  environment {
    id = confluent_environment.staging.id
  }
  
  display_name   = "azure-integration"
  cloud_provider = "azure"
}

# Configure and validate the Azure integration
resource "confluent_provider_integration_v2_authorization" "azure" {
  provider_integration_id = confluent_provider_integration_v2.azure.id
  
  environment {
    id = confluent_environment.staging.id
  }
  
  azure {
    customer_azure_tenant_id = "12345678-1234-1234-1234-123456789abc"
  }
}
```

### GCP Provider Integration

```terraform
resource "confluent_provider_integration_v2" "gcp" {
  environment {
    id = confluent_environment.staging.id
  }
  
  display_name   = "gcp-integration"
  cloud_provider = "gcp"
}

# Configure and validate the GCP integration
resource "confluent_provider_integration_v2_authorization" "gcp" {
  provider_integration_id = confluent_provider_integration_v2.gcp.id
  
  environment {
    id = confluent_environment.staging.id
  }
  
  gcp {
    customer_google_service_account = "my-sa@my-project.iam.gserviceaccount.com"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Argument Reference

The following arguments are supported:

- `display_name` - (Required String) The name of the Provider Integration.
- `cloud_provider` - (Required String) The cloud service provider. Supported values are `azure` and `gcp`.
- `environment` - (Required Configuration Block) supports the following:
    - `id` - (Required String) The ID of the Environment that the Provider Integration belongs to, for example, `env-abc123`.

## Attributes Reference

In addition to the preceding arguments, the following attributes are exported:

- `id` - (Required String) The ID of the Provider Integration, for example, `cspi-4xg0q`.
- `status` - (Required String) The status of the Provider Integration. Values are `DRAFT` and `CREATED`.
- `usages` - (Required List of Strings) List of resource CRNs where this provider integration is being used.

## Import

-> **Note:** `CONFLUENT_CLOUD_API_KEY` and `CONFLUENT_CLOUD_API_SECRET` environment variables must be set before importing a Provider Integration.

You can import a Provider Integration by using Environment ID and Provider Integration ID, in the format `<Environment ID>/<Provider Integration ID>`. The following example shows how to import a Provider Integration:

```shell
$ export CONFLUENT_CLOUD_API_KEY="<cloud_api_key>"
$ export CONFLUENT_CLOUD_API_SECRET="<cloud_api_secret>"
$ terraform import confluent_provider_integration_v2.main env-abc123/cspi-4xg0q
```

!> **Warning:** Do not forget to delete terminal command history afterwards for security purposes.

## Getting Started

The following end-to-end examples might help to get started with `confluent_provider_integration_v2` resource:
* [provider-integration-azure](https://github.com/confluentinc/terraform-provider-confluent/tree/master/examples/configurations/provider-integration-azure): Complete Azure Provider Integration setup
* [provider-integration-gcp](https://github.com/confluentinc/terraform-provider-confluent/tree/master/examples/configurations/provider-integration-gcp): Complete GCP Provider Integration setup